# =============================================================================
# ChiroClickCRM Environment Configuration
# Copy this file to .env and fill in your values
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000
API_VERSION=v1

# Frontend URL for CORS
CORS_ORIGIN=http://localhost:5173

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://user:password@localhost:5432/chiroclickcrm
DB_HOST=localhost
DB_PORT=5432
DB_NAME=chiroclickcrm
DB_USER=user
DB_PASSWORD=password
DB_SSL=false
DB_MAX_CONNECTIONS=20

# -----------------------------------------------------------------------------
# Redis (Cache & Sessions)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=chiroclickcrm:

# -----------------------------------------------------------------------------
# Authentication (Clerk)
# -----------------------------------------------------------------------------
CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
CLERK_WEBHOOK_SECRET=whsec_...

# -----------------------------------------------------------------------------
# Encryption
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=your-32-byte-encryption-key-base64
ENCRYPTION_IV=your-16-byte-iv-base64

# Key rotation settings
KEY_ROTATION_DAYS=90
KEY_ROTATION_ENABLED=true

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Sensitive data rate limits
RATE_LIMIT_GDPR_EXPORT_WINDOW=86400000
RATE_LIMIT_GDPR_EXPORT_MAX=5
RATE_LIMIT_DELETION_WINDOW=3600000
RATE_LIMIT_DELETION_MAX=10

# -----------------------------------------------------------------------------
# SMS (Twilio)
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_FROM_NUMBER=+47xxxxxxxxx

# SMS rate limits
SMS_RATE_LIMIT_PER_PATIENT=5
SMS_RATE_LIMIT_WINDOW_HOURS=24

# -----------------------------------------------------------------------------
# Email (SendGrid/SMTP)
# -----------------------------------------------------------------------------
SENDGRID_API_KEY=your-sendgrid-api-key
EMAIL_FROM=noreply@chiroclickcrm.no
EMAIL_FROM_NAME=ChiroClickCRM

# Or use SMTP
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-smtp-user
SMTP_PASSWORD=your-smtp-password

# -----------------------------------------------------------------------------
# AI Services (Ollama local models)
# -----------------------------------------------------------------------------
AI_ENABLED=true
AI_MODEL=chiro-no
AI_MODEL_FAST=chiro-fast
AI_MODEL_NORWEGIAN=chiro-norwegian
AI_MODEL_MEDICAL=chiro-medical
AI_MAX_TOKENS=2000
OLLAMA_BASE_URL=http://localhost:11434

# Optional: OpenAI fallback
# OPENAI_API_KEY=sk-...
# AI_MODEL=gpt-4-turbo-preview

# -----------------------------------------------------------------------------
# File Storage
# -----------------------------------------------------------------------------
STORAGE_TYPE=local
STORAGE_PATH=./uploads

# Or use S3-compatible storage
S3_BUCKET=your-bucket-name
S3_REGION=eu-north-1
S3_ACCESS_KEY=your-access-key
S3_SECRET_KEY=your-secret-key

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_AI_ENABLED=true
FEATURE_SMS_ENABLED=true
FEATURE_EMAIL_ENABLED=true
FEATURE_GDPR_STRICT=true

# -----------------------------------------------------------------------------
# Testing
# -----------------------------------------------------------------------------
TEST_DATABASE_URL=postgresql://user:password@localhost:5432/chiroclickcrm_test
PLAYWRIGHT_BASE_URL=http://localhost:5173
